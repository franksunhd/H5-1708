<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>获取服务器学生信息内容</title>
    <link rel="stylesheet" href="./css/master.css">
  </head>
  <body>
    <div class="main w">
      <button id="item" type="button" name="button">获取服务器学生信息内容</button>
      <table class="stu">
        <caption><h1>学生信息</h1></caption>
        <thead>
          <tr>
            <th>name</th>
            <th>age</th>
            <th>score</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <script src="./js/jquery.min.js" charset="utf-8"></script>
    <script type="text/javascript">

    $("#item").click(function(){
      //1 xml
      var xhr = new XMLHttpRequest();

      //2 open()

      xhr.open("post","http://127.0.0.1:8000/table",true);

      //4
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
          if ((xhr.status >= 200) && (xhr.status < 400)) {
            //xhr.response数据

            //json的解析(将字符串解析为json)
            var data = JSON.parse(xhr.response);
            console.log(data);

            var stus = data.stus;//数组
            // console.log(stus);

            //对接收的服务端数据进行拆解显示

            //生成表格
            // for (var i = 0; i < stus.length; i++) {
            //   $(".stu tbody").append("<tr><td>"+ stus[i].name +"</td><td>" + stus[i].age + "</td><td>" + stus[i].score + "</td></tr>");
            // }

          } else {
          }
        }
      };
      //3 send()
      xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
      xhr.send();
    });

    </script>
  </body>
</html>
